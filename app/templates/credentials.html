{% extends 'base.html' %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
        <h4 class="mb-0">Zerodha API Credentials</h4>
        <small class="text-muted">Configure your API access for live trading data</small>
      </div>
      <div class="card-body">
        {% if has_credentials %}
        <div class="alert alert-success" role="alert">
          <i class="bi bi-check-circle-fill"></i> Credentials configured
          <br><small>Update below to change your credentials</small>
        </div>
        {% else %}
        <div class="alert alert-warning" role="alert">
          <i class="bi bi-exclamation-triangle-fill"></i> No credentials configured
          <br><small>You need to add credentials to use live monitoring features</small>
        </div>
        {% endif %}
        
        <form method="post">
          <div class="mb-3">
            <label for="api_key" class="form-label">API Key *</label>
            <input type="text" class="form-control" id="api_key" name="api_key" 
                   placeholder="Enter your Zerodha API Key" required>
            <div class="form-text">Get this from Zerodha Developer Console</div>
          </div>
          
          <div class="mb-3">
            <label for="access_token" class="form-label">Access Token *</label>
            <input type="text" class="form-control" id="access_token" name="access_token" 
                   placeholder="Enter your Access Token" required>
            <div class="form-text">Refresh daily - get from Zerodha login</div>
          </div>
          
          <div class="alert alert-info" role="alert">
            <strong><i class="bi bi-info-circle"></i> How to get credentials:</strong>
            <ol class="mb-0 mt-2">
              <li>Visit <a href="https://developers.kite.trade/" target="_blank">Zerodha Developer Console</a></li>
              <li>Create an app to get your API Key</li>
              <li>Login to Kite Connect to get Access Token</li>
              <li>Token expires daily - refresh before market hours</li>
            </ol>
          </div>
          
          <div class="d-grid gap-2 d-md-flex justify-content-md-between">
            <a href="{{ url_for('main.dashboard') }}" class="btn btn-secondary">
              <i class="bi bi-arrow-left"></i> Back
            </a>
            <button type="submit" class="btn btn-primary">
              <i class="bi bi-save"></i> Save Credentials
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}